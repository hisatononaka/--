# transforms の値はすべて「確率」。blur の強さは uniform(0.1, 2.0) で固定。
# 値がない → その拡張はかけない
# 配列 → num ごとに異なる確率（長さが num 未満のときは最後の要素を流用）
# スカラ → 全 num で同じ確率
batch_size: 64 # 1バッチあたりの元画像枚数（DINO の B）

# 訓練
train:
  epochs: 100
  lr: 0.0005
  min_lr: 0.000001
  warmup_epochs: 10
  weight_decay: 0.04
  momentum_teacher: 0.996 # EMA の base。cosine で 1.0 まで上昇
  teacher_temp: 0.04
  warmup_teacher_temp: 0.04
  warmup_teacher_temp_epochs: 0
  num_workers: 0 # DataLoader。0 でメインのみ
  # H5 の指定（プロジェクトルート基準）。フォルダ指定でその下の全 .h5 を読み込む
  data_path: "data"
  # data_path: "data"              # フォルダ → data/**/*.h5 をすべて使用
  # data_path: ["data/a.h5", "data/b.h5"]  # リストで複数ファイルを明示

# student / teacher 用
model:
  embed_dim: 384 # backbone 出力次元（ViT-S 相当）
  out_dim: 65536 # DINO head 出力次元（プロトタイプ数）
  use_adapter: true # SpectralAdapter で 151ch→128ch

global:
  crop_scale: [0.4, 1.0]
  size: [224, 224]
  num: 2
  transforms:
    gaussian_blur: [1.0, 0.1]
    flip: 0.5

local:
  crop_scale: [0.05, 0.4]
  size: [96, 96]
  num: 6
  transforms:
    gaussian_blur: 0.5
    flip: 0.5
